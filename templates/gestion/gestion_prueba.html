{% extends 'base/base.html' %}
{% block titulo %}Gesti贸n{% endblock titulo %}

<!-- ======= Breadcrumbs ======= -->
{% block etiqueta %}Gesti贸n{% endblock etiqueta %}
{% block nav %}
  <nav>
    <div class="container">
      <ol>
        <li><a href="{% url 'index' %}">Inicio</a></li>
        <li>Gesti贸n</li>
      </ol>
    </div>
  </nav>
  {% endblock nav %}
<!-- End Breadcrumbs -->
    
  {% block contenido %}
  
    <section id="contact" class="contact">
      <div class="container" data-aos="fade-up">
        <!-- <div class="row gx-lg-0 gy-4"> -->

          <!--filtros-->
          <div class="input-group mb-3">
            <h2>Buscar</h2>
            <hr>
          </div>
          
          <!-- Primera propuesta -->
          <!--caja de busqueda -->

          <!-- Segunda propuesta -->
          <div class="input-group mb-3">
            <form class="php-email-form" id="" name="gestion_form" action="{% url 'gestion_index' %}" method="POST" >
              {% csrf_token %}

          <!-- Formulario Busqueda -->
            <div class="input-group mb-3">
                {{ form_busqueda.criterio1_valor }}
                <div class="input-group-append">
                  {{ form_busqueda.criterio1_campo }}
                </div>            
            </div>

            <div class="input-group mb-3">
              {{ form_busqueda.criterio2_valor }}
              <div class="input-group-append">
                {{ form_busqueda.criterio2_campo }}
              </div>            
            </div>

            <div class="input-group mb-3">
              {{ form_busqueda.criterio3_valor }}
              <div class="input-group-append">
                {{ form_busqueda.criterio3_campo }}
              </div>            
            </div>

            <div class="input-group mb-3">
              {{ form_busqueda.criterio4_valor }}
              <div class="input-group-append">
                {{ form_busqueda.criterio4_campo }}
              </div>            
            </div>

              <div class="input-group-append">
                <button class="btn btn-warning" type="reset">Limpiar</button>
                <button class="btn btn-primary" type="submit">Buscar</button>
              </div>
            </form>           
          </div>
          <!--fin filtros-->
          
          <!--- Tabla con los datos-->
          <div class="input-group mb-3">
            <h2>Resultados tabla gestion</h2>
            <hr>
          </div>
          <div class="table-responsive">
              <table class="table table-striped table-hover">

                <!-- Titulos -->
                <thead>
                  <tr>
                    <th class="ancho-celda">Acciones</th>
                    {% for titulo in campos %}
                    <th class="ancho-celda">{{ titulo.attname }}</th>
                    {% endfor %}  
                  </tr>
                </thead>

                <!-- Datos de tabla   -->
                <tbody>
                    <!-- Por cada reclamo en la lista reclamos -->
                    {% for item in gestion %}
                      <tr>
                        <!-- Datos de item -->
                        <td class="ancho-celda">
                          <a href="{% url 'gestion_editar' item.id %}" class="btn btn-warning" role="button">
                            Editar
                          </a>
                          <a href="{% url 'gestion_eliminar' item.id %}" class="btn btn-danger" role="button">Borrar
                          </a>
                        </td>
                        <td class="ancho-celda">
                          {{ item.id }}
                        </td>
                        <td class="ancho-celda">
                          {{ item.estado }}
                        </td>
                        <td class="ancho-celda">
                          {{ item.gestion }}
                        </td> 
                        <td class="ancho-celda">
                          {{ item.detalle_gestion }}
                        </td> 
                        <td class="ancho-celda">
                          {{ item.equipo_trabajo }}
                        </td> 
                        <td class="ancho-celda">
                          {{ item.fecha_programada }}
                        </td> 
                        <td class="ancho-celda">
                          {{ item.fecha_solucion }}
                        </td> 
                        <td class="ancho-celda">
                          {{ item.orden_trabajo }}
                        </td> 
                        <td class="ancho-celda">
                          {{ item.arbol }}
                        </td>  
                        <td class="ancho-celda">
                          {{ item.baja }}
                        </td>  
                        <!-- Fin de loop datos de reclamos -->
                        
                      </tr>
                    {% endfor %} 
                    <!-- fin de recorrer cada reclamo -->
                </tbody>
              </table>
          </div>
        </div>
      </div>
    </div>

      <!-- pagination -->
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">Anterior</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="#">1</a></li>
          <li class="page-item">
            <a class="page-link" href="#">2</a></li>
          <li class="page-item">
            <a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Pr贸ximo</a>
          </li>
        </ul>
      </nav>

      <!-- fin pagination-->
    </section>
  </main>
  
{% endblock contenido %}
